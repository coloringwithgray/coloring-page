<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Reflections - Coloring with Gray</title>

  <meta name="description" content="Reflections: The other side of the portal.">
  <link rel="icon" type="image/png" href="assets/crayon-optimized.png" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" />
  <link rel="stylesheet" href="reflections.css" />
  <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
  <!-- Loading screen -->
  <div id="loading-screen">
    <div class="loader-content">
      <div class="loader-spinner"></div>
      <p class="loader-text">Loading reflection...</p>
    </div>
  </div>

  <div class="reflection-container">
    <!-- Main reflection image -->
    <img id="reflection-image"
         src="assets/ChatGPT Image Oct 25, 2025 at 04_54_16 PM.png"
         alt="Reflection: Woman and bottle in shattered mirror" />

    <!-- SVG Overlay for clickable hotspots -->
    <svg id="hotspot-overlay"
         viewBox="0 0 100 100"
         preserveAspectRatio="xMidYMid slice">
      <g id="hotspots">
        <!-- Bottle hotspot (lower-left area) -->
        <rect id="bottle-hotspot"
              x="26.8" y="55"
              width="13" height="23"
              fill="transparent"
              style="cursor: pointer;"
              tabindex="0"
              role="button"
              aria-label="Click bottle to explore product" />

        <!-- Woman hotspot (covers her whole body) -->
        <rect id="woman-hotspot"
              x="55" y="10"
              width="30" height="60"
              fill="transparent"
              style="cursor: pointer;"
              tabindex="0"
              role="button"
              aria-label="Click to watch video" />
      </g>
    </svg>

    <!-- Crack glow effects (hidden until hover) -->
    <div id="crack-glow"></div>
    <div id="woman-crack-glow"></div>

    <!-- Audio elements -->
    <audio id="light-hum-audio" loop preload="none">
      <source src="assets/low%20hum.mp3" type="audio/mpeg">
    </audio>
    <audio id="glass-shatter-audio" preload="none">
      <source src="assets/glass%20for%20site.mp3" type="audio/mpeg">
    </audio>

    <!-- Shatter overlay (hidden initially) -->
    <canvas id="shatter-canvas"></canvas>

    <!-- Bottle emergence container (hidden initially) -->
    <div id="bottle-cart-container" style="display: none;">
      <button id="close-cart-btn" aria-label="Close"></button>
      <div id="bottle-emergence">
        <img data-src="assets/a9697fa4-5adc-46c3-aba9-692db7f2893c.png"
             alt="Product bottle"
             id="emerged-bottle" />

        <!-- Payment form (hidden until user clicks a button) -->
        <div id="payment-form-container" style="display: none;">
          <h3 class="product-title">Reflections Of You</h3>
          <p class="product-price">$324.00</p>

          <!-- Apple Pay / Google Pay button will appear here -->
          <div id="payment-request-button"></div>

          <!-- Or divider (only shown if express payment is available) -->
          <div id="or-divider" style="display: none;">
            <span>or pay with card</span>
          </div>

          <!-- Card payment form -->
          <form id="payment-form">
            <div id="address-element"></div>
            <div id="payment-element"></div>
            <button id="submit-payment" type="submit">
              <span id="button-text">Pay $324</span>
              <span id="spinner" class="spinner" style="display: none;"></span>
            </button>
            <div id="payment-message" class="payment-message"></div>
          </form>
        </div>

        <!-- Initial button (shown first) -->
        <div id="initial-buttons" class="button-group">
          <button id="add-to-cart-btn" class="purchase-btn cart-btn">
            <span class="cart-icon"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- Video modal for woman (hidden initially) -->
    <div id="video-modal" style="display: none;">
      <button id="video-close-btn" aria-label="Close video"></button>
      <div id="video-emergence">
        <iframe id="video-iframe"
                src=""
                frameborder="0"
                allow="autoplay; fullscreen; picture-in-picture"
                allowfullscreen
                title="Reflection video"></iframe>
      </div>
    </div>
  </div>

  <script src="reflections.js"></script>
</body>
</html>
